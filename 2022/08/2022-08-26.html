
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <title>2022-08-26å· Â· Neco Weekly</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 3.7.5">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-intopic-toc/style.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        

    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="2022-08-19.html" />
    
    

    <link href="https://cybozu-neco.github.io/neco-weekly/rss.xml" title="Neco Weekly" rel="alternate" type="application/rss+xml" />

<meta property="og:type" content="article">
<meta property="og:title" content="2022-08-26å·">
<meta property="og:description" content="æœ€è¿‘æ°—ã«ãªã‚‹ Cloud Native é–¢é€£ã®ãƒã‚¿">
<meta property="og:site_name" content="Neco Weekly">
<meta property="og:image" content="https://cybozu-neco.github.io/neco-weekly/neco-weekly.png">
<meta name="twitter:card" content="summary_large_image">

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Neco Weeklyã¨ã¯
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    2022å¹´
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" >
            
                <span>
            
                    
                    9æœˆ
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../09/2022-09-08.html">
            
                <a href="../09/2022-09-08.html">
            
                    
                    2022-09-08å·
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="../09/2022-09-01.html">
            
                <a href="../09/2022-09-01.html">
            
                    
                    2022-09-01å·
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" >
            
                <span>
            
                    
                    8æœˆ
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.2.2.1" data-path="2022-08-26.html">
            
                <a href="2022-08-26.html">
            
                    
                    2022-08-26å·
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="2022-08-19.html">
            
                <a href="2022-08-19.html">
            
                    
                    2022-08-19å·
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="2022-08-05.html">
            
                <a href="2022-08-05.html">
            
                    
                    2022-08-05å·
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" >
            
                <span>
            
                    
                    7æœˆ
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="../07/2022-07-29.html">
            
                <a href="../07/2022-07-29.html">
            
                    
                    2022-07-29å·
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.2" data-path="../07/2022-07-22.html">
            
                <a href="../07/2022-07-22.html">
            
                    
                    2022-07-22å·
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >2022-08-26å·</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
<image src="/neco-weekly/neco-weekly.png"></image>

                                <h1 id="neco-weekly-2022-08-26å·">Neco Weekly (2022-08-26å·)</h1>
<p>ã‚µã‚¤ãƒœã‚¦ã‚º Neco ãƒãƒ¼ãƒ ã§ã¯ã€ Neco Weekly ã¨ã„ã†ã€Œæœ€è¿‘æ°—ã«ãªã‚‹ Cloud Native é–¢é€£ã®ãƒã‚¿ã‚’å…±æœ‰ã™ã‚‹ä¼šã€ã‚’ç¤¾å†…ã§é–‹å‚¬ã—ã¦ã„ã¾ã™ã€‚
æœ¬è¨˜äº‹ã¯å…±æœ‰ä¼šã®ä¸­ã§ç´¹ä»‹ã—ãŸãƒã‚¿ã‚’ã¾ã¨ã‚ãŸã‚‚ã®ã§ã™ã€‚</p>
<p>ä»Šå›ã¯ç¬¬5å›ç›®ã®è¨˜äº‹ã¨ãªã‚Šã¾ã™ã€‚</p>
<h2 id="âœ¨-kubernetes-125">âœ¨ Kubernetes 1.25</h2>
<p>ä»Šå›ã¯ã€Kubernetes 1.25 ã®ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‹ã‚‰æ°—ã«ãªã£ãŸã‚‚ã®ã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>
<blockquote class="embedly-card" data-card-controls="0"><h4 id="kubernetes-125---whats-new---new-features-and-deprecations"><a href="https://sysdig.com/blog/kubernetes-1-25-whats-new/" target="_blank">Kubernetes 1.25 - What&apos;s new? - New features and deprecations</a></h4><p>Kubernetes 1.25 is about to be released, and it comes packed with novelties! Where do we begin? This release brings 40 enhancements, on par with the 46 in Kubernetes 1.24 and 45 in Kubernetes 1.23. Of those 40 enhancements, 13 are graduating to Stable, 10 are existing features that keep improving, 15 are completely new, and two are deprecated features.</p></blockquote>

<h3 id="127-add-support-for-user-namespaces"><a href="https://github.com/kubernetes/enhancements/issues/127" target="_blank">#127</a> Add support for user namespaces</h3>
<p>User Namespace ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ³ãƒ†ãƒŠå†…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼/ã‚°ãƒ«ãƒ¼ãƒ—ã¨ãƒ›ã‚¹ãƒˆå†…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼/ã‚°ãƒ«ãƒ¼ãƒ—ãŒåˆ†é›¢ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
<p>ã“ã‚Œã¾ã§ã¯ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ root ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦å®Ÿè¡Œã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã¯ã€ãƒ›ã‚¹ãƒˆå†…ã§ã‚‚ root ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦å®Ÿè¡Œã•ã‚Œã¦ã„ãŸãŸã‚ã€è„†å¼±æ€§ã«ã‚ˆã‚Šãƒ—ãƒ­ã‚»ã‚¹ãŒã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰æŠœã‘å‡ºã—ãŸå ´åˆã«ãƒ›ã‚¹ãƒˆä¸Šã§å¼·ã„æ¨©é™ã‚’æŒã£ã¦ã—ã¾ã†ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚
ä¾‹ãˆã° Postfix ã¯ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãªã‚Šã™ã¾ã—ã¦å‹•ããŸã‚ã€root ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸãŒã€ä»Šå¾Œã¯ãã®ã‚ˆã†ãªãƒ—ãƒ­ã‚»ã‚¹ã‚‚ Kubernetes ä¸Šã§å®‰å…¨ã«å‹•ã‹ã™ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
<p>ãªãŠã“ã®æ©Ÿèƒ½ã«ã¤ã„ã¦ã¯ã€ KubeCon NA 2022 ã®ä¸‹è¨˜ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ã‚‚è©³ã—ãç´¹ä»‹ã•ã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚</p>
<ul>
<li><a href="https://kccncna2022.sched.com/event/182K0/run-as-root-not-root-user-namespaces-in-k8s-marga-manterola-isovalent-rodrigo-campos-catelin-microsoft?iframe=no&amp;w=100%&amp;sidebar=yes&amp;bg=no" target="_blank">Run As â€œRootâ€, Not Root: User Namespaces In K8s</a></li>
</ul>
<h3 id="5-podsecuritypolicy--2579-podsecurity-admission"><a href="https://github.com/kubernetes/enhancements/issues/5" target="_blank">#5</a> PodSecurityPolicy + <a href="https://github.com/kubernetes/enhancements/issues/2579" target="_blank">#2579</a> PodSecurity admission</h3>
<p>ä»¥å‰ã‹ã‚‰å‘ŠçŸ¥ã•ã‚Œã¦ã„ãŸã¨ãŠã‚Š PodSecurityPolicy ãŒå»ƒæ­¢ã¨ãªã‚Šã€ä»£ã‚ã‚Šã« PodSecurity admission ãŒåˆ©ç”¨å¯èƒ½ã«ãªã£ã¦ã„ã¾ã™ã€‚</p>
<p>ãªãŠã€Neco ãƒãƒ¼ãƒ ã§ã¯ Kubernetes å…¬å¼ã® PodSecurity admission ã‚’åˆ©ç”¨ã›ãšã€ä»¥ä¸‹ã® pod-security-admission ã‚’è‡ªå‰ã§å®Ÿè£…ã—ã¦ä½¿ã£ã¦ã„ã¾ã™ã€‚
ï¼ˆå…¬å¼ã®ã‚‚ã®ã‚ˆã‚Šã‚‚å…ˆã«å®Ÿè£…ã—ã¦ã„ãŸãŸã‚ã€åå‰ãŒã‹ã¶ã£ã¦ã—ã¾ã£ã¦ã„ã¾ã™ğŸ˜…ï¼‰</p>
<blockquote class="embedly-card" data-card-controls="0"><h4 id="github---cybozu-gopod-security-admission-a-kubernetes-admission-webhook-to-ensure-pod-security-standards"><a href="https://github.com/cybozu-go/pod-security-admission" target="_blank">GitHub - cybozu-go/pod-security-admission: A Kubernetes admission webhook to ensure pod security standards</a></h4><p>The PSP replacement has been announced. This project is just a stopgap until it is replaced. pod-security-admission is a set of Kubernetes Admission Webhooks to ensure Pod Security Standards. pod-security-admission aims to be a simple Pod Security Policy replacement. This is not a policy engine and users cannot write their own policies flexibly.</p></blockquote>

<p>å…¬å¼ã® PodSecurity admission ã¯ã€Kubernetes ä¸Šã§å‹•ä½œã—ã¦ã„ã‚‹ Pod ã«å¯¾ã—ã¦ã‚‚ãƒãƒªã‚·ãƒ¼ãƒã‚§ãƒƒã‚¯ã‚’ãŠã“ãªã†ã“ã¨ãŒã§ãã¾ã™ãŒã€Neco ã® pod-security-admission ã«ã¯ãã®ã‚ˆã†ãªæ©Ÿèƒ½ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
ä¸€æ–¹ã€å…¬å¼ã® PodSecurity admission ã§ã¯ Pod Security Standards ä»¥å¤–ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã™ã‚‹ã“ã¨ãŒé›£ã—ã„ã®ã§ã™ãŒã€Neco ã® pod-security-admission ã§ã¯ã€ãƒãƒªã‚·ãƒ¼ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã‚„ã™ããªã£ã¦ã„ã¾ã™ã€‚</p>
<h3 id="3327-cpu-manager-policy-socket-alignment"><a href="https://github.com/kubernetes/enhancements/issues/3327" target="_blank">#3327</a> CPU Manager policy: socket alignment</h3>
<p>Kubernetes ä¸Šã§ MySQL ã®ã‚ˆã†ãª CPU intensive ãªãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã‚’å‹•ã‹ã™å ´åˆã€ååˆ†ãªæ€§èƒ½ã‚’å¾—ã‚‹ãŸã‚ã« CPU Pinning ã‚’ãŠã“ãªã†ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã® CPU Pinning ã‚’ãŠã“ãªã†éš›ã«ã€å æœ‰ã™ã‚‹ã‚³ã‚¢ãŒ NUMA ãƒãƒ¼ãƒ‰ã‚’ã¾ãŸãã‹ã€ã‚½ã‚±ãƒƒãƒˆã‚’ã¾ãŸãã‹ã«ã‚ˆã£ã¦ã€ãƒ¡ãƒ¢ãƒªã‚¢ã‚¯ã‚»ã‚¹ã®é€Ÿåº¦ãŒå¤§ããå¤‰ã‚ã‚Šã¾ã™ã€‚</p>
<p>ã“ã‚Œã¾ã§ã® CPU Manager ã§ã¯ NUMA ãƒãƒ¼ãƒ‰ã‚’ã¾ãŸãŒãªã„ã‚ˆã†ãªè¨­å®šã¯ã§ãã¦ã„ãŸã®ã§ã™ãŒã€ä»Šå›ã‹ã‚‰ã‚½ã‚±ãƒƒãƒˆã‚’ã¾ãŸãŒãªã„ã‚ˆã†ãªè¨­å®šãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
<p>NUMA ãƒãƒ¼ãƒ‰ã‚„ã‚½ã‚±ãƒƒãƒˆã‚’ã¾ãŸã„ã éš›ã®ãƒ¡ãƒ¢ãƒªã‚¢ã‚¯ã‚»ã‚¹é€Ÿåº¦ã«ã¤ã„ã¦çŸ¥ã‚ŠãŸã„æ–¹ã¯ã€ä»¥ä¸‹ã®è¨˜äº‹ã‚’ãœã²ã”è¦§ãã ã•ã„ã€‚</p>
<blockquote class="embedly-card" data-card-controls="0"><h4 id="epycãƒã‚·ãƒ³ã®æ¤œè¨¼2---numaãƒãƒ¼ãƒ‰ã‚’ã¾ãŸããƒ¡ãƒ¢ãƒªã‚¢ã‚¯ã‚»ã‚¹é€Ÿåº¦---cybozu-inside-out--ã‚µã‚¤ãƒœã‚¦ã‚ºã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ãƒ–ãƒ­ã‚°"><a href="https://blog.cybozu.io/entry/2018/03/29/170000" target="_blank">EPYCãƒã‚·ãƒ³ã®æ¤œè¨¼(2) - NUMAãƒãƒ¼ãƒ‰ã‚’ã¾ãŸããƒ¡ãƒ¢ãƒªã‚¢ã‚¯ã‚»ã‚¹é€Ÿåº¦ - Cybozu Inside Out | ã‚µã‚¤ãƒœã‚¦ã‚ºã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ãƒ–ãƒ­ã‚°</a></h4><p>æŠ€è¡“é¡§å•ã®satã§ã™ã€‚ å‰å› ã«å¼•ãç¶šãã€EPYCãƒã‚·ãƒ³ã®æ¤œè¨¼ã«ã¤ã„ã¦ã®è©±ã‚’ã—ã¾ã™ã€‚æ‰‹å…ƒã®EPYCãƒã‚·ãƒ³(Super Micro AS-1023US-TR4)ã¯NUMAã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£(å¾Œè¿°)ã‚’æ¡ç”¨ã—ã¦ã¾ã™ã€‚ä»Šå›ã¯ã“ã®ãƒã‚·ãƒ³ã«ãŠã‘ã‚‹NUMAãƒãƒ¼ãƒ‰ã‚’ã¾ãŸã„ã ãƒ¡ãƒ¢ãƒªã‚¢ã‚¯ã‚»ã‚¹ã«é–¢ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’æ¡å–ã—ã¾ã—ãŸã®ã§ã€ãã®çµæœã‚’ãŠä¼ãˆã—ã¾ã™ã€‚ ...</p></blockquote>

<h3 id="2254-cgroup-v2"><a href="https://github.com/kubernetes/enhancements/issues/2254" target="_blank">#2254</a> cgroup v2</h3>
<p>cgroup v2 ã‚µãƒãƒ¼ãƒˆãŒ stable ã«ãªã‚Šã¾ã—ãŸã€‚</p>
<p>ãªãŠ Neco ãƒãƒ¼ãƒ ã§ã¯ã€åˆ©ç”¨ã—ã¦ã„ã‚‹ OS (Flatcar Linux) ã§ cgroup v2 ãŒæœ‰åŠ¹åŒ–ã•ã‚ŒãŸãŸã‚ã€æ˜¨å¹´æ™‚ç‚¹ã§ cgroup v2 ã®å°å…¥ã‚’çµ‚ãˆã¦ã„ã¾ã™ã€‚
Kubernetes ã® cgroup v2 ã«é–¢ã™ã‚‹æƒ…å ±ãŒå°‘ãªãã¦å°å…¥ã«ã¯è‹¦åŠ´ã—ãŸã®ã§ã™ãŒã€ãã®ã¨ãã®çŸ¥è¦‹ã‚’ãƒ–ãƒ­ã‚°ã«ã¾ã¨ã‚ã¦ã‚ã‚‹ã®ã§ã‚ˆã‚ã—ã‘ã‚Œã°ã”è¦§ãã ã•ã„ã€‚</p>
<blockquote class="embedly-card" data-card-controls="0"><h4 id="five-things-to-prepare-for-cgroup-v2-with-kubernetes---kintone-engineering-blog"><a href="https://blog.kintone.io/entry/2022/03/08/170206" target="_blank">Five Things to Prepare for Cgroup v2 with Kubernetes - Kintone Engineering Blog</a></h4><p>By Daichi Sakaue (@yokaze) Above all the effort of the community, Kubernetes is now ready to run with cgroup v2. We recently migrated our on-premises Kubernetes clusters to use cgroup v2 and discovered some key points to know. This blog post explains what cgroup v2 is, what it brings to Kubernetes, ...</p></blockquote>

<p>ãªãŠã€ä»Šå›ã® cgroup v2 å¯¾å¿œã§ã¯ã€v1 ã‹ã‚‰ v2 å‘ã‘ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åå¤‰æ›´ãŒä¸­å¿ƒã¨ãªã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚
ä»Šå¾Œã¯ãƒ¡ãƒ¢ãƒªã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚„ OOM Killer ã®ä»•çµ„ã¿ãŒæ”¹å–„ã•ã‚Œã¦ã„ãã‚ˆã†ãªã®ã§æ¥½ã—ã¿ã§ã™ã­ã€‚</p>
<ul>
<li><a href="https://kubernetes.io/blog/2021/11/26/qos-memory-resources/" target="_blank">Quality-of-Service for Memory Resources</a></li>
<li><a href="https://www.scrivano.org/posts/2020-08-14-oom-group/" target="_blank">Container-aware OOM killer</a></li>
</ul>
<h3 id="3094-take-taintstolerations-into-consideration-when-calculating-podtopologyspread-skew"><a href="https://github.com/kubernetes/enhancements/issues/3094" target="_blank">#3094</a> Take taints/tolerations into consideration when calculating PodTopologySpread Skew</h3>
<p>PodTopologySpread ã¯ã€Pod ã‚’è¤‡æ•°ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã«åˆ†æ•£é…ç½®ã™ã‚‹ãŸã‚ã®æ©Ÿèƒ½ã§ã™ã€‚</p>
<p>PodTopologySpread ã§ã¯ã€ãƒ‰ãƒ¡ã‚¤ãƒ³é–“ã§ã® Pod ã®åã‚ŠãŒ maxSkew ã‚’è¶…ãˆãªã„ã‚ˆã†ã«åˆ¶å¾¡ã™ã‚‹ã®ã§ã™ãŒã€ã„ã¾ã¾ã§ã¯ Taints ãŒä»˜ã„ã¦ãŸãƒãƒ¼ãƒ‰ã‚‚ Skew ã¨ã—ã¦ã‚«ã‚¦ãƒ³ãƒˆã•ã‚Œã¦ã„ã¾ã—ãŸã€‚
ãã®ãŸã‚ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒãƒ¼ãƒ‰ã‚’å†èµ·å‹•ã™ã‚‹ã¨ããªã©ã«ãƒãƒ¼ãƒ‰ã« Taints ãŒä»˜ä¸ã•ã‚Œã€Pod ãŒã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ããªãã¦ Pending çŠ¶æ…‹ã«ãªã£ã¦ã—ã¾ã†ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚</p>
<p><img src="podtopologyspread_taints.png" alt="Take taints/tolerations into consideration when calculating PodTopologySpread Skew"></p>
<p>ä»Šå›ã‹ã‚‰ã€Taints ã‚„ Affinity ãŒä»˜ä¸ã•ã‚ŒãŸãƒãƒ¼ãƒ‰ã‚’ Skew ã®å¯¾è±¡å¤–ã¨ã™ã‚‹è¨­å®šãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
ãŸã ã—ã€ã“ã‚Œã¾ã§é€šã‚Š Taints ã®ã¤ã„ãŸãƒãƒ¼ãƒ‰ã‚‚å«ã‚ã¦æ¬²ã—ã„ã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚‹ã®ã§ã€å¯¾è±¡å¤–ã¨ã™ã‚‹ã‹ã—ãªã„ã‹ã®è¨­å®šã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚</p>
<h3 id="3243-respect-podtopologyspread-after-rolling-upgrades-to-review"><a href="https://github.com/kubernetes/enhancements/issues/3243" target="_blank">#3243</a> Respect PodTopologySpread after rolling upgrades (to review)</h3>
<p>ã“ã‚Œã¾ã§ã¯ã€Deployment ã®ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹éš›ã«ã€æ–°ã—ã„ Pod ç¾¤ã¨å¤ã„ Pod ç¾¤ã‚’åŒºåˆ¥ã›ãšåˆ†æ•£é…ç½®ã—ã¦ã„ã¾ã—ãŸã€‚
ãã®ãŸã‚ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰å¾Œã«ä»¥ä¸‹ã®ã‚ˆã†ã«åã‚ŠãŒç”Ÿã˜ã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã—ãŸã€‚</p>
<p><img src="podtopologyspread_rolloingupgrades.png" alt="Respect PodTopologySpread after rolling upgrades"></p>
<p>ãã“ã§ã€PodTopologySpread ã®å¯¾è±¡ã‚’ LabelSelector ã§æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã€<code>pod-template-hash</code> ãƒ©ãƒ™ãƒ«ã§åˆ†æ•£é…ç½®ã™ã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã‚’åˆ†é›¢ã—ã‚ˆã†ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚
æˆ‘ã€…ã®ç’°å¢ƒã§ã‚‚ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰å¾Œã« Pod ãŒåã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã£ãŸã®ã§ã€ã“ã‚Œã¯ã‚ã‚ŠãŒãŸã„ã§ã™ã€‚</p>
<h3 id="3022-min-domains-in-podtopologyspread"><a href="https://github.com/kubernetes/enhancements/issues/3022" target="_blank">#3022</a> Min domains in PodTopologySpread</h3>
<p>PodTopologySpread ã® Min domains æ©Ÿèƒ½ãŒãƒ™ãƒ¼ã‚¿ã«ãªã‚Šã¾ã—ãŸã€‚</p>
<p>ã“ã‚Œã¯ Pod ã‚’åˆ†æ•£é…ç½®ã™ã‚‹éš›ã«ã€æœ€ä½é™ã„ãã¤ä»¥ä¸Šã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã«åˆ†æ•£é…ç½®ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã‹ã‚’è¨­å®šã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚
ä¾‹ãˆã°ã€Elasticsearch ã®ã‚¯ãƒ©ã‚¹ã‚¿ã®å¯ç”¨æ€§ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã«ã€3ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚„5ãƒ‰ãƒ¡ã‚¤ãƒ³ã«åˆ†æ•£é…ç½®ã•ã›ãŸã„ã¨ããªã©ã«å½¹ç«‹ã¤æ©Ÿèƒ½ã§ã™ã€‚</p>
<p>ã“ã®æ©Ÿèƒ½ã‚’é–‹ç™ºã•ã‚ŒãŸæ–¹ã®ãƒ–ãƒ­ã‚°ã‚‚å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<blockquote class="embedly-card" data-card-controls="0"><h4 id="kubernetes-ã¸-mindomains-ã¨ã„ã†æ©Ÿèƒ½ã®-kep-ã‚’å‡ºã—ã¦ã€alphaæ©Ÿèƒ½ã¨ã—ã¦ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸè©±"><a href="https://sanposhiho.com/posts/mindomain-kep/" target="_blank">Kubernetes ã¸ MinDomains ã¨ã„ã†æ©Ÿèƒ½ã® KEP ã‚’å‡ºã—ã¦ã€alphaæ©Ÿèƒ½ã¨ã—ã¦ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸè©±</a></h4><p>ã“ã‚“ã«ã¡ã¯ã€‚ ç¤¾ä¼šäººã«ãªã£ã¦ã‚„ã‚ŠãŸã„ã“ã¨ã«å¯¾ã™ã‚‹è‡ªåˆ†ã®æ™‚é–“ãŒåœ§å€’çš„ã«è¶³ã‚Šãªããªã‚Šè¬ã®ç„¦ç‡¥æ„Ÿã«é§†ã‚‰ã‚Œã¦ã„ã¾ã™ã€sanposhihoã§ã™ã€‚ åƒ•ã¯ã€æ™®æ®µè¶£å‘³ã®æ™‚é–“ã‚’ä½¿ã£ã¦Kubernetesã«contributeã—ã¦ã„ã¾ã™ã€‚æ˜¨å¹´ã« MinDomains ã¨ã„ã†Pod Topology Spreadã®æ–°ã—ã„æ©Ÿèƒ½ã®KEPãŒæ‰¿èªã•ã‚Œã€alphaæ©Ÿèƒ½ã¨ã—ã¦Kubernetes ...</p></blockquote>

<h2 id="ã‚ã¨ãŒã">ã‚ã¨ãŒã</h2>
<p>ç¾åœ¨ Neco ãƒãƒ¼ãƒ ã§ã¯ã‚µãƒãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã‚’å®Ÿæ–½ã—ã¦ãŠã‚Šã€å­¦ç”Ÿã•ã‚“ã«ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®é–‹ç™ºã‚’ã—ã¦ã‚‚ã‚‰ã£ã¦ã„ã¾ã™ã€‚</p>
<ul>
<li><a href="https://github.com/cybozu-go/necotiator" target="_blank">https://github.com/cybozu-go/necotiator</a></li>
<li><a href="https://github.com/cybozu-go/nyamber" target="_blank">https://github.com/cybozu-go/nyamber</a></li>
</ul>
<p>ã‚µãƒãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã®æ§˜å­ã¯å¾Œæ—¥æ”¹ã‚ã¦å ±å‘Šã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>

                                

                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="2022-08-19.html" class="navigation navigation-next navigation-unique" aria-label="Next page: 2022-08-19å·">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"2022-08-26å·","level":"1.2.2.1","depth":3,"next":{"title":"2022-08-19å·","level":"1.2.2.2","depth":3,"path":"2022/08/2022-08-19.md","ref":"2022/08/2022-08-19.md","articles":[]},"previous":{"title":"8æœˆ","level":"1.2.2","depth":2,"ref":"","articles":[{"title":"2022-08-26å·","level":"1.2.2.1","depth":3,"path":"2022/08/2022-08-26.md","ref":"2022/08/2022-08-26.md","articles":[]},{"title":"2022-08-19å·","level":"1.2.2.2","depth":3,"path":"2022/08/2022-08-19.md","ref":"2022/08/2022-08-19.md","articles":[]},{"title":"2022-08-05å·","level":"1.2.2.3","depth":3,"path":"2022/08/2022-08-05.md","ref":"2022/08/2022-08-05.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["back-to-top-button","intopic-toc","toolbar","rss"],"root":"./","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"intopic-toc":{"selector":".markdown-section h1, .markdown-section h2, .markdown-section h3","mode":"nested","maxDepth":2,"isCollapsed":false,"isScrollspyActive":true,"visible":true,"label":"In this article"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"rss":{"categories":[],"title":"Neco Weekly","author":"cybozu-neco","site_url":"https://cybozu-neco.github.io/neco-weekly/","feed_url":"https://cybozu-neco.github.io/neco-weekly/rss.xml"},"highlight":{},"back-to-top-button":{},"toolbar":{"buttons":[{"label":"GitHub","icon":"fa fa-github fa-2x","url":"https://github.com/cybozu-neco/neco-weekly"}]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Neco Weekly","image":"https://cybozu-neco.github.io/neco-weekly/neco-weekly.png","gitbook":"*","description":"æœ€è¿‘æ°—ã«ãªã‚‹ Cloud Native é–¢é€£ã®ãƒã‚¿"},"file":{"path":"2022/08/2022-08-26.md","mtime":"2022-08-29T09:10:23.149Z","type":"markdown"},"gitbook":{"version":"3.7.5","time":"2022-09-14T02:51:44.592Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        

    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-intopic-toc/anchor.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-intopic-toc/gumshoe.polyfills.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-intopic-toc/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-toolbar/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-rss/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

<script src="//cdn.embedly.com/widgets/platform.js" charset="UTF-8"></script>

    </body>
</html>

